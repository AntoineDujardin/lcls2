Example JSON string:

{"key":"ports","control":{"ports":{"router_port":{"adrs":"psbuild-rhel6","port":36152},"pull_port":{"adrs":"psbuild-rhel6","port":45880}},"name":"control"}}


The same JSON content, pretty printed:

{
    "key": "ports",
    "control": {
        "ports": {
            "router_port": {
                "adrs": "psbuild-rhel6",
                "port": 36152
            },
            "pull_port": {
                "adrs": "psbuild-rhel6",
                "port": 45880
            }
        },
        "name": "control"
    }
}


Example RapidJSON parsing code:

    #include "rapidjson/document.h"

      ...

        char buf[] = "<JSON string>"

        // parse JSON into a Document
        rapidjson::Document document;
        document.Parse(buf);

        // interpret Document
        if (document.HasMember("key")) {
            printf("--> key=\"%s\"\n", document["key"].GetString());
        }
        if (document.HasMember("control") &&
            document["control"].HasMember("ports") &&
            document["control"]["ports"].HasMember("pull_port") &&
            document["control"]["ports"]["pull_port"].HasMember("adrs") &&
            document["control"]["ports"]["pull_port"].HasMember("port")) {
            // get references to pull_port adrs and port
            rapidjson::Value& adrs = document["control"]["ports"]["pull_port"]["adrs"];
            rapidjson::Value& port = document["control"]["ports"]["pull_port"]["port"];
            printf("--> pull_port: adrs=\"%s\" port=%d\n", adrs.GetString(), port.GetInt());
        } else {
            printf("failed to find pull_port adrs and port in JSON\n");
        }


Output from the above example RapidJSON parsing code:

    --> key="ports"
    --> pull_port: adrs="psbuild-rhel6" port=45880
